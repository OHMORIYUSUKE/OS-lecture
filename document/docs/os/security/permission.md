# パーミッション

## ファイルの権限

Linux にはファイルごとに権限を設定することができます。

!!! note

    windowsにはこのような機能はありません

ルートユーザーのみ書き込みを許されているファイルや、ファイルを作成したユーザーのみ編集可能な権限などがあります。

## セキュリティ

ファイルに権限を適切に設定することで、ファイルの改ざんや消去されることを防ぎます。

## `chmod`コマンド

`chmod`コマンドを用いて権限の変更を行います。
任意のディレクトリで、`ls -la`で権限を確認することができます。

```sh
ubuntu@ip-172-31-85-199:/var/www/html$ ls -la
total 16
drwxr-xr-x 2 root root 4096 Jun 13 13:43 .
drwxr-xr-x 3 root root 4096 Jun 11 03:25 ..
-rw-rw-rw- 1 root root   23 Jun 18 08:36 index.html
-rw-rw-rw- 1 root root   20 Jun 18 07:58 index.php
```

index.html の権限を例に解説する。

```sh
-rw-rw-rw- 1 root root   23 Jun 18 08:36 index.html
│└────────┘ │ └────────┘   └──────────────┘ └─────────┘
1    2     3     4              5             6
```

先頭から

1. `-`は種類を示す。(`-`はファイル　`d`はディレクトリ)
2. `rw-rw-rw-`は所有者・グループ・その他のグループの権限を示す。(詳細はこの後述べる)
3. `1`リンク数(そのディレクトリが持つファイル、ディレクトリの数)
4. `root root`所有者とグループ(root ユーザーの root グループ)
5. `23 Jun 18 08:36`更新日時
6. ファイル名またはディレクトリ名

---

## `rw-rw-rw-`について

### `r`,`w`,`-`の意味

| アクセス権 | 表記 | 説明                 |
| ---------- | ---- | -------------------- |
| 読み取り   | r 　 | ファイルの読み取り   |
| 書き込み   | w 　 | ファイルへの書き込み |
| 実行       | x 　 | ファイルの実行       |

`r`,`w`,`-`を許可するかどうかで権限を設定する。

### `rw-`の意味

`rw-rw-rw-`は先頭から 3 文字づづに分割できる。
先頭の３文字の`rw-`は所有者の権限を示す。
次の３文字の`rw-`はグループの権限を示す。
その次の`rw-`は、そのほかのユーザーの権限を示す。

以下の表で`rw-`のような権限は示すことができる。

| 記号表記 | 2 進数 | 8 進数 |
| -------- | ------ | ------ |
| ---      | 000    | 0      |
| --x      | 001    | 1      |
| -w-      | 010    | 2      |
| -wx      | 011    | 3      |
| r--      | 100    | 4      |
| r-x      | 101    | 5      |
| rw-      | 110    | 6      |
| rwx      | 111    | 7      |

### ファイルに権限を与える(実践)

`index.html`には`-rw-rw-rw- 1 root root 23 Jun 18 08:36 index.html`のような権限が与えられていた。
この権限を与えるには、`rw-`(所有者),`rw-`(グループ),`rw-`(その他のユーザー)の権限を与える。

上記の表を参照すると、`rw-`は 10 進数で**6**である。この 6 を用いて設定を行う。

```sh
ubuntu@ip-172-31-85-199:/var/www/html$ sudo chmod 666 index.html
```

このようなコマンドを打つことで、`rw-`(所有者),`rw-`(グループ),`rw-`(その他のユーザー)の権限を与えることができる。

!!! note

    `その他のユーザー`に`rw-`の権限を与えたので、`sudo vi index.html`と入力し、rootで編集する必要がなくなった。ubuntuユーザーで、`vi index.html`で編集可能である。

## 参考

[Linux - File Permission](https://www.infraeye.com/study/linuxz26.html)
